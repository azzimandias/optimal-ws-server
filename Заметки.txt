Что нужно сделать на новом сервере

Подключиться по SSH:

ssh root@192.168.1.16


Клонировать репозиторий и установить зависимости:

git clone <твой_репозиторий>
cd server
npm install


Запустить через PM2:

pm2 start ecosystem.config.js


или если хочешь прямо app.js:

pm2 start app.js --name ERP-SERVER


Убедиться, что все WS порты открыты на сервере (5001–5003 и 4000) в firewall/NAT, чтобы фронтенд мог подключаться.

Важно для фронтенда

Если фронтенд у тебя делает:

const ws = new WebSocket('ws://192.168.1.16:5003');


и сервер поднят по инструкции выше, он подключится к CHAT WebSocket (5003) и сможет обмениваться сообщениями.

Предположение: фронтенд и сервер находятся в одной сети или порты открыты для внешнего подключения.

✅ Вывод:
Если все зависимости установлены, PM2 поднят, а порты открыты — твой фронтенд начнёт нормально подключаться к 192.168.1.16:5003.










# ИНСТРУКЦИЯ

## 1. Подготовка сервера

ssh root@192.168.1.16

## 2. Установка зависимостей

cd /var/www/server
npm install

## 3. Настройка PM2

pm2 kill
pm2 start ecosystem.config.js
pm2 list

## 4. Проверка портов
ss -tulnp | grep 5003

### должно вернуться:
tcp   LISTEN 0 511 *:5003 *:* users:(("node /var/www/server/app.js",pid=XXXX,fd=XX))

## 5. Проверка работы фронтенда

Фронтенд должен подключаться к ws://192.168.1.16:5003/.

HTTP-запросы тоже через http://192.168.1.16:5003/.

В браузере можно открыть лог-вьювер:
http://192.168.1.16:5003/
Там должны отображаться live HTTP-запросы.

# 6. Настройка автозапуска PM2

pm2 save
pm2 startup
